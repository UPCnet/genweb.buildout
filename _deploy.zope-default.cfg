[ports]
zc1 = 11001
zc2 = 11002
zc3 = 11003
zc4 = 11004

zcdebug = 11901

zeo1 = 8001
zeo2 = 8002
zeo3 = 8003
zeo4 = 8004

circus = 8080

[zope-common]
zeo-client = on
shared-blob = off
zodb-cache-size = 500
user = admin:admin
effective-user = plone
debug-mode = off
verbose-security = off
python-check-interval = ${hosts:python-interval}
zope-conf-additional =
    maximum-number-of-session-objects 10000
environment-vars =
    PTS_LANGUAGES en es ca zh
    zope_i18n_allowed_languages en es ca zh
    zope_i18n_compile_mo_files true
    TMPDIR /var/plone/tmp
    ldapbindpasswd ${ldapconfig:bindpasswd}
    PYTHONWARNINGS ignore
    alt_ldap_uri ${ldapconfig:alt_ldap_uri}
    alt_bind_dn ${ldapconfig:alt_bind_dn}
    alt_bindpasswd ${ldapconfig:alt_bindpasswd}
    alt_base_dn ${ldapconfig:alt_base_dn}
    varnish_url ${deployment:varnish_url}
    dorsal ${deployment:dorsal}
eggs =
    Zope2
    Plone
    ${buildout:eggs}
zcml =

[zc1]
<= zope-common
recipe = plone.recipe.zope2instance
zeo-address = ${zeoaddr:zc1}
http-address = ${ports:zc1}
zope-conf-additional =
    maximum-number-of-session-objects 10000
    <product-config genwebconfig>
        zeo 1
    </product-config>

[zc2]
<= zope-common
recipe = plone.recipe.zope2instance
zeo-address = ${zeoaddr:zc2}
http-address = ${ports:zc2}
zope-conf-additional =
    maximum-number-of-session-objects 10000
    <product-config genwebconfig>
        zeo 1
    </product-config>

[zc3]
<= zope-common
recipe = plone.recipe.zope2instance
zeo-address = ${zeoaddr:zc3}
http-address = ${ports:zc3}
zope-conf-additional =
    maximum-number-of-session-objects 10000
    <product-config genwebconfig>
        zeo 1
    </product-config>

[zc4]
<= zope-common
recipe = plone.recipe.zope2instance
zeo-address = ${zeoaddr:zc4}
http-address = ${ports:zc4}
zope-conf-additional =
    maximum-number-of-session-objects 10000
    <product-config genwebconfig>
        zeo 1
    </product-config>

[zcdebug]
<= zope-common
recipe = plone.recipe.zope2instance
zeo-address = ${zeoaddr:zc1}
http-address = ${ports:zcdebug}

[checkinterval]
recipe = zc.recipe.egg
eggs = jarn.checkinterval

[supervisor]
recipe = collective.recipe.supervisor
programs =
    10 zc1 ${buildout:directory}/bin/zc1 [console] true plone
    10 zc2 ${buildout:directory}/bin/zc2 [console] true plone
    10 zc3 ${buildout:directory}/bin/zc3 [console] true plone
    10 zc4 ${buildout:directory}/bin/zc4 [console] true plone

[circus]
recipe = zc.recipe.egg:scripts
eggs = circus
       circus-web

[circus-ini]
recipe = collective.recipe.template
input = ${buildout:directory}/config/templates/circus_zope_only.ini.template
output = ${buildout:directory}/config/circus.ini
